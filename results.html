
<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุชุงุฆุฌ ุงูุชุตููุช - ุฑูุงู ูุฏุฑูุฏ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>ูุชุงุฆุฌ ุงูุชุตููุช ๐</h1>
        <nav>
            <ul>
                <li><a href="index.html">ุงูุฑุฆูุณูุฉ</a></li>
                <li><a href="players.html">ุงููุงุนุจูู</a></li>
                <li><a href="matches.html">ุงููุจุงุฑูุงุช</a></li>
                <li><a href="trophies.html">ุงูุจุทููุงุช</a></li>
                <li><a href="legends.html">ุงูุฃุณุงุทูุฑ</a></li>
                <li><a href="register.html">ุชุณุฌูู ุนุถู ุฌุฏูุฏ</a></li>
                <li><a href="vote.html">ุงูุชุตููุช ููุงุนุจูู</a></li>
                <li><a href="results.html">ูุชุงุฆุฌ ุงูุชุตููุช</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h2 style="text-align: center; color: #00529f; margin-bottom: 2rem;">ุฅุญุตุงุฆูุงุช ุงูุชุตููุช</h2>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalVotesCount">0</div>
                <div class="stat-label">ุฅุฌูุงูู ุงูุชุตููุชุงุช</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="uniqueVoters">0</div>
                <div class="stat-label">ูุดุฌุน ูุดุงุฑู</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avgRating">0</div>
                <div class="stat-label">ูุชูุณุท ุงูุชูููู</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="topPlayer">-</div>
                <div class="stat-label">ุงูุฃูุซุฑ ุชุตููุชุงู</div>
            </div>
        </div>

        <div class="card" style="margin: 2rem 0;">
            <h3 style="color: #00529f; margin-bottom: 1rem;">ุชูุฒูุน ุงูุชุตููุชุงุช ุญุณุจ ุงููุงุนุจูู</h3>
            <div id="playersChart"></div>
        </div>

        <div class="card">
            <h3 style="color: #00529f; margin-bottom: 1rem;">ุขุฎุฑ ุงูุชุตููุชุงุช</h3>
            <div id="recentVotes"></div>
        </div>
    </main>

    <footer>
        <p>ยฉ 2025 ูููุน ุฑูุงู ูุฏุฑูุฏ - ุชุตููู ููุงุก ุฒูููู</p>
    </footer>

    <script>
        function displayResults() {
            const votes = JSON.parse(localStorage.getItem('madridVotes')) || [];
            const users = JSON.parse(localStorage.getItem('madridUsers')) || [];
            
            // ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช ุงูุฃุณุงุณูุฉ
            document.getElementById('totalVotesCount').textContent = votes.length;
            document.getElementById('uniqueVoters').textContent = users.length;
            
            // ุญุณุงุจ ูุชูุณุท ุงูุชูููู
            if (votes.length > 0) {
                const totalRating = votes.reduce((sum, vote) => sum + parseInt(vote.rating), 0);
                const avgRating = (totalRating / votes.length).toFixed(1);
                document.getElementById('avgRating').textContent = avgRating;
            }
            
            // ุฅูุฌุงุฏ ุงููุงุนุจ ุงูุฃูุซุฑ ุชุตููุชุงู
            if (votes.length > 0) {
                const playerVotes = {};
                votes.forEach(vote => {
                    playerVotes[vote.player] = (playerVotes[vote.player] || 0) + 1;
                });
                
                const topPlayer = Object.keys(playerVotes).reduce((a, b) => 
                    playerVotes[a] > playerVotes[b] ? a : b
                );
                
                document.getElementById('topPlayer').textContent = getPlayerName(topPlayer);
            }
            
            // ุนุฑุถ ุชูุฒูุน ุงููุงุนุจูู
            displayPlayersChart(votes);
            
            // ุนุฑุถ ุขุฎุฑ ุงูุชุตููุชุงุช
            displayRecentVotes(votes);
        }
        
        function getPlayerName(playerKey) {
            const players = {
                'bellingham': 'ุฌูุฏ ุจููููุบูุงู',
                'vini': 'ููููุณููุณ ุฌููููุฑ',
                'rodrygo': 'ุฑูุฏุฑูุบู',
                'valverde': 'ููุฏุฑููู ูุงูููุฑุฏู',
                'modric': 'ูููุง ููุฏุฑูุชุด',
                'kroos': 'ุชููู ูุฑูุณ',
                'rudiger': 'ุฃูุทูููู ุฑูุฏูุบุฑ',
                'courtois': 'ุชูุจู ููุฑุชูุง'
            };
            return players[playerKey] || playerKey;
        }
        
        function displayPlayersChart(votes) {
            if (votes.length === 0) {
                document.getElementById('playersChart').innerHTML = '<p style="text-align: center; color: #666;">ูุง ุชูุฌุฏ ุชุตููุชุงุช ุญุชู ุงูุขู</p>';
                return;
            }
            
            const playerVotes = {};
            votes.forEach(vote => {
                playerVotes[vote.player] = (playerVotes[vote.player] || 0) + 1;
            });
            
            let chartHTML = '';
            Object.entries(playerVotes).forEach(([player, count]) => {
                const percentage = ((count / votes.length) * 100).toFixed(1);
                chartHTML += `
                    <div style="margin: 0.5rem 0;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                            <span>${getPlayerName(player)}</span>
                            <span>${count} ุตูุช (${percentage}%)</span>
                        </div>
                        <div style="background: #e0e0e0; border-radius: 5px; height: 10px;">
                            <div style="background: #00529f; height: 100%; border-radius: 5px; width: ${percentage}%"></div>
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('playersChart').innerHTML = chartHTML;
        }
        
        function displayRecentVotes(votes) {
            if (votes.length === 0) {
                document.getElementById('recentVotes').innerHTML = '<p style="text-align: center; color: #666;">ูุง ุชูุฌุฏ ุชุตููุชุงุช ุญุชู ุงูุขู</p>';
                return;
            }
            
            const recentVotes = votes.slice(-5).reverse(); // ุขุฎุฑ 5 ุชุตููุชุงุช
            let votesHTML = '';
            
            recentVotes.forEach(vote => {
                votesHTML += `
                    <div style="background: #f8f9fa; padding: 1rem; margin: 0.5rem 0; border-radius: 8px; border-right: 4px solid #00529f;">
                        <div style="display: flex; justify-content: space-between; flex-wrap: wrap;">
                            <strong>${getPlayerName(vote.player)}</strong>
                            <span>โญ ${vote.rating}/5</span>
                        </div>
                        <div style="color: #666; font-size: 0.9rem; margin-top: 0.25rem;">
                            ${vote.match} โข ${vote.voteDate}
                        </div>
                        ${vote.comment ? `<div style="margin-top: 0.5rem; color: #555;">"${vote.comment}"</div>` : ''}
                    </div>
                `;
            });
            
            document.getElementById('recentVotes').innerHTML = votesHTML;
        }
        
        // ุนุฑุถ ุงููุชุงุฆุฌ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        displayResults();
    </script>
</body>
</html>